<?phpApp::uses('AppController', 'Controller');/** * Sliders Controller * * @property Slider $Slider * @property PaginatorComponent $Paginator */class SlidersController extends AppController {/** * Components * * @var array */	public $components = array('Paginator');/** * index method * * @return void */ public function admin_index() {		/*$this->Slider->recursive = 0;		$this->Paginator->settings = $this->paginate;		$this->set('sliders', $this->Paginator->paginate());*/						$this->Slider->recursive = 0;		$this->Paginator->settings = $this->paginate;		//$options = array('conditions' => array('Slider.type' => ''));		$this->set('sliders', $this->Paginator->paginate('Slider',array('Slider.type' => '')));							 	}/** * view method * * @throws NotFoundException * @param string $id * @return void */	public function admin_view($id = null) {		if (!$this->Slider->exists($id)) {			throw new NotFoundException(__('Invalid Slider'));		}		$options = array('conditions' => array('Slider.' . $this->Slider->primaryKey => $id));		$this->set('slider', $this->Slider->find('first', $options));	}/** * add method * * @return void */	public function admin_add() {		if ($this->request->is('post')) {			#pr($this->request->data);			#exit;			if(isset($this->request->data['Slider']['image']) && $this->request->data['Slider']['image']['name']!=''){				$ext = explode('/',$this->request->data['Slider']['image']['type']);				if($ext){					$uploadFolder = "slider_images";					$uploadPath = WWW_ROOT . $uploadFolder;					$extensionValid = array('jpg','jpeg','png','gif');					if(in_array($ext[1],$extensionValid)){						$imageName = rand().'_slider.'.$ext[1];						$full_image_path = $uploadPath . '/' . $imageName;						move_uploaded_file($this->request->data['Slider']['image']['tmp_name'],$full_image_path);						$this->request->data['Slider']['image'] = $imageName;					} else{						$this->Session->setFlash(__('Please uploade image of .jpg, .jpeg, .png or .gif format.'));					}				}			} 			$this->Slider->create();			if ($this->Slider->save($this->request->data)) {				$this->Session->setFlash(__('The slider has been saved.'));				return $this->redirect(array('action' => 'index'));			} else {				$this->Session->setFlash(__('The slider could not be saved. Please, try again.'));			}		}	}/** * edit method * * @throws NotFoundException * @param string $id * @return void */	public function admin_edit($id = null) {		if (!$this->Slider->exists($id)) {			throw new NotFoundException(__('Invalid Slider'));		}		if ($this->request->is(array('post', 'put'))) {			if(isset($this->request->data['Slider']['image']) && $this->request->data['Slider']['image']['name']!=''){				$ext = explode('/',$this->request->data['Slider']['image']['type']);				if($ext){					$uploadFolder = "slider_images";					$uploadPath = WWW_ROOT . $uploadFolder;					$extensionValid = array('jpg','jpeg','png','gif');					if(in_array($ext[1],$extensionValid)){						$imageName = rand().'_slider.'.$ext[1];						$full_image_path = $uploadPath . '/' . $imageName;						move_uploaded_file($this->request->data['Slider']['image']['tmp_name'],$full_image_path);						$this->request->data['Slider']['image'] = $imageName;					} else{						$this->Session->setFlash(__('Please uploade image of .jpg, .jpeg, .png or .gif format.'));					}				}			} else {				$this->request->data['Slider']['image'] = $this->request->data['Slider']['hid_image'];			}			if ($this->Slider->save($this->request->data)) {				$this->Session->setFlash(__('The Slider has been saved.'));				return $this->redirect(array('action' => 'index'));			} else {				$this->Session->setFlash(__('The Slider could not be saved. Please, try again.'));			}		} else {			$options = array('conditions' => array('Slider.' . $this->Slider->primaryKey => $id));			$this->request->data = $this->Slider->find('first', $options);		}	}/** * delete method * * @throws NotFoundException * @param string $id * @return void */	public function admin_delete($id = null) {		$this->Slider->id = $id;		if (!$this->Slider->exists()) {			throw new NotFoundException(__('Invalid Slider'));		}		#$this->request->onlyAllow('post', 'delete');		if ($this->Slider->delete($id)) {			$this->Session->setFlash(__('The Slider has been deleted.'));		} else {			$this->Session->setFlash(__('The Slider could not be deleted. Please, try again.'));		}		return $this->redirect(array('action' => 'index'));	}}